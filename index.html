<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ASTROãƒ»POP | 2026 Destiny & MBTI</title>
    
    <!-- â˜…â˜…â˜… Google AdSense â˜…â˜…â˜… -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2895749032536610"
     crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@500;700&family=Noto+Sans+KR:wght@500;700&family=Noto+Sans+TC:wght@400;700;900&family=Fredoka:wght@500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #050505;
            --primary: #8b5cf6;
            --accent: #06b6d4;
            --gold: #fbbf24;
            --mbti: #10b981; /* MBTI å°ˆå±¬ç¶ è‰² */
            --card-glass: rgba(30, 41, 59, 0.7);
            --border: rgba(255, 255, 255, 0.15);
        }

        body {
            margin: 0;
            font-family: 'Fredoka', 'Noto Sans TC', sans-serif;
            background: var(--bg);
            color: white;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, #312e81 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, #064e3b 0%, transparent 50%);
            overflow-x: hidden;
        }

        /* Nav */
        nav { 
            padding: 15px 20px; display: flex; flex-direction: column; align-items: center; gap: 10px;
            background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 999; border-bottom: 1px solid var(--border);
        }
        @media (min-width: 768px) { nav { flex-direction: row; justify-content: space-between; } }
        
        .logo { font-size: 1.5rem; font-weight: 900; background: linear-gradient(90deg, #fff, var(--mbti)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .lang-scroll { display: flex; gap: 8px; justify-content: center; width: 100%; }
        .lang-btn { background: transparent; border: 1px solid var(--border); color: #94a3b8; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; cursor: pointer; }
        .lang-btn.active { border-color: var(--primary); background: rgba(139, 92, 246, 0.2); color: white; }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }

        /* Hero */
        .hero { text-align: center; padding: 40px 20px; }
        .hero h1 { font-size: 2.2rem; margin: 0 0 15px 0; text-shadow: 0 0 20px rgba(16, 185, 129, 0.6); }
        .hero p { color: #94a3b8; font-size: 1rem; line-height: 1.6; }

        /* Preview Grid */
        .preview-container { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 30px; }
        @media (min-width: 768px) { .preview-container { grid-template-columns: repeat(4, 1fr); } }
        
        .p-card { 
            background: var(--card-glass); border: 1px solid var(--border); border-radius: 20px; 
            padding: 20px; text-align: center; cursor: pointer; transition: 0.3s;
        }
        .p-card:hover { transform: translateY(-5px); border-color: var(--mbti); }
        .p-icon { font-size: 2rem; margin-bottom: 5px; }
        .p-title { font-weight: bold; color: #fff; font-size: 1rem; }

        /* CTA */
        .btn-main { width: 100%; padding: 16px; border: none; border-radius: 50px; background: linear-gradient(90deg, var(--primary), var(--mbti)); color: white; font-weight: 900; font-size: 1.2rem; cursor: pointer; animation: pulse 2s infinite; box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4); }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.03);} 100% {transform: scale(1);} }

        /* Result Layout */
        #result-view { display: none; padding-bottom: 100px; }
        .result-layout { display: flex; flex-direction: column; gap: 20px; }
        @media (min-width: 900px) { .result-layout { display: grid; grid-template-columns: 350px 1fr; align-items: start; } }

        /* Main Card */
        .main-star-card { background: linear-gradient(180deg, rgba(139, 92, 246, 0.15), rgba(0,0,0,0.4)); border: 1px solid var(--primary); border-radius: 24px; padding: 40px 20px; text-align: center; }
        .star-name { font-size: 2.8rem; font-weight: 900; margin: 15px 0; }
        
        /* MBTI Card (New Feature) */
        .mbti-card { 
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(0,0,0,0.4)); 
            border: 1px solid var(--mbti); border-radius: 20px; padding: 25px; 
            text-align: center; margin-top: 20px; position: relative; overflow: hidden;
        }
        .mbti-tag { background: var(--mbti); color: black; font-weight: bold; padding: 3px 10px; border-radius: 5px; font-size: 0.8rem; }
        .mbti-title { font-size: 2.5rem; font-weight: 900; color: var(--mbti); margin: 10px 0; font-family: monospace; letter-spacing: 2px; }
        
        /* Promotion Button */
        .btn-promo {
            display: block; width: 100%; padding: 12px; margin-top: 15px;
            background: var(--mbti); color: black; font-weight: bold; text-decoration: none;
            border-radius: 12px; transition: 0.2s; border: 2px solid var(--mbti);
        }
        .btn-promo:hover { background: transparent; color: var(--mbti); }

        /* Dashboard */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-card { background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 15px; border-radius: 16px; text-align: center; }
        .stat-val { font-size: 0.9rem; font-weight: bold; color: #fff; }

        /* Lock & Hidden */
        .lock-box { background: #0f172a; border: 1px solid var(--gold); padding: 30px; border-radius: 20px; text-align: center; margin-top: 20px; }
        #hidden-content { display: none; margin-top: 20px; }
        
        /* Share Button */
        .btn-share {
            width: 100%; padding: 16px; background: linear-gradient(90deg, #3b82f6, #8b5cf6); 
            color: white; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; 
            margin-top: 20px; font-size: 1.1rem; display: flex; align-items: center; justify-content: center; gap: 8px;
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }
        .btn-share:active { transform: scale(0.98); }

        /* Toast Notification */
        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center;
            border-radius: 50px; padding: 16px; position: fixed; z-index: 1000; left: 50%; bottom: 30px;
            transform: translateX(-50%); font-size: 1rem; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

        /* Modal */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; z-index: 200; }
        .modal-box { background: #1e293b; width: 90%; max-width: 400px; padding: 30px; border-radius: 24px; }
        .input-el { width: 100%; padding: 15px; margin-bottom: 15px; background: rgba(0,0,0,0.3); border: 1px solid var(--border); color: white; border-radius: 12px; box-sizing: border-box; }

    </style>
</head>
<body>

    <nav>
        <div class="logo">ASTROãƒ»POP</div>
        <div class="lang-scroll">
            <button class="lang-btn active" onclick="setLang('zh')">ç¹ä¸­</button>
            <button class="lang-btn" onclick="setLang('en')">EN</button>
            <button class="lang-btn" onclick="setLang('jp')">æ—¥æœ¬èª</button>
            <button class="lang-btn" onclick="setLang('kr')">í•œêµ­ì–´</button>
        </div>
    </nav>

    <!-- Home -->
    <div class="container" id="home-view">
        <div class="hero">
            <h1 id="txt-hero">2026 AI å…¨æ¯äººç”Ÿ<br><span style="color:var(--mbti)">+ çœŸå¯¦ MBTI å´å¯«</span></h1>
            <p id="txt-sub">èåˆç´«å¾®æ–—æ•¸èˆ‡æ¦®æ ¼å¿ƒç†å­¸ï¼Œæ­éœ²ä½ çš„éˆé­‚ä»£ç¢¼ã€‚</p>
        </div>

        <div class="preview-container">
            <div class="p-card" onclick="openInput()">
                <div class="p-icon">ğŸ‘‘</div><div class="p-title" id="c1">æœ¬å‘½ä¸»æ˜Ÿ</div>
            </div>
            <div class="p-card" onclick="openInput()">
                <div class="p-icon">ğŸ§ </div><div class="p-title" id="c2">MBTIäººæ ¼</div>
            </div>
            <div class="p-card" onclick="openInput()">
                <div class="p-icon">ğŸ’˜</div><div class="p-title" id="c3">æ„›æƒ…é›·å€</div>
            </div>
            <div class="p-card" onclick="openInput()">
                <div class="p-icon">ğŸ’°</div><div class="p-title" id="c4">è‡´å¯Œå¼±é»</div>
            </div>
        </div>

        <div style="text-align: center;">
            <button class="btn-main" onclick="openInput()" id="btn-start">âš¡ ç«‹å³å…è²»æ¸¬ç®—</button>
        </div>
        <div style="height:50px"></div>
    </div>

    <!-- Modal -->
    <div class="modal" id="input-modal">
        <div class="modal-box">
            <h2 id="m-title" style="margin:0 0 20px 0; text-align:center;">è¼¸å…¥è³‡æ–™</h2>
            <input type="text" class="input-el" id="inp-name" placeholder="Name">
            <input type="date" class="input-el" id="inp-date">
            <select class="input-el" id="inp-hour">
                <option value="0">00:00 - 02:00 (å­/ä¸‘)</option>
                <option value="4">04:00 - 06:00 (å¯…/å¯)</option>
                <option value="8">08:00 - 10:00 (è¾°/å·³)</option>
                <option value="12">12:00 - 14:00 (åˆ/æœª)</option>
                <option value="16">16:00 - 18:00 (ç”³/é…‰)</option>
                <option value="20">20:00 - 22:00 (æˆŒ/äº¥)</option>
            </select>
            <button class="btn-main" onclick="calculate()" id="m-btn">âœ¨ é–‹å§‹åˆ†æ</button>
            <div style="text-align:center; margin-top:20px; color:#aaa; cursor:pointer;" onclick="closeInput()">Close</div>
        </div>
    </div>

    <!-- Result -->
    <div class="container" id="result-view">
        <div class="result-layout">
            
            <!-- Left Col -->
            <div class="left-col">
                <!-- 1. Star Card -->
                <div class="main-star-card">
                    <span style="background:var(--primary); padding:4px 10px; border-radius:5px; font-size:0.8rem;" id="res-tag">THE EMPEROR</span>
                    <div class="star-name" id="res-star">--</div>
                    <p style="color:#e2e8f0; line-height:1.6;" id="res-desc">--</p>
                </div>

                <!-- 2. MBTI Card (With Promo Link) -->
                <div class="mbti-card">
                    <span class="mbti-tag">YOUR TRUE TYPE</span>
                    <div class="mbti-title" id="res-mbti">----</div>
                    <p style="font-size:0.9rem; color:#cbd5e1;" id="res-mbti-desc">--</p>
                    
                    <!-- â˜…â˜…â˜… Cross Promotion Link â˜…â˜…â˜… -->
                    <a href="https://mbti-9lg4.onrender.com" target="_blank" class="btn-promo">
                        ğŸ‘‰ <span id="txt-promo">æ¸¬æ¸¬ä½ çš„çœŸå¯¦ MBTI (å°ˆæ¥­ç‰ˆ)</span>
                    </a>
                </div>
            </div>

            <!-- Right Col -->
            <div class="right-col">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <span style="font-size:1.5rem">ğŸ’</span>
                        <div class="stat-val" id="res-love">--</div>
                        <span style="font-size:0.7rem; color:#888;">Love Style</span>
                    </div>
                    <div class="stat-card">
                        <span style="font-size:1.5rem">ğŸš©</span>
                        <div class="stat-val" style="color:#fca5a5;" id="res-toxic">--</div>
                        <span style="font-size:0.7rem; color:#888;">Red Flag</span>
                    </div>
                    <div class="stat-card">
                        <span style="font-size:1.5rem">ğŸ¢</span>
                        <div class="stat-val" id="res-office">--</div>
                        <span style="font-size:0.7rem; color:#888;">Office Role</span>
                    </div>
                    <div class="stat-card">
                        <span style="font-size:1.5rem">ğŸ’¸</span>
                        <div class="stat-val" id="res-trap">--</div>
                        <span style="font-size:0.7rem; color:#888;">Money Trap</span>
                    </div>
                    <div class="stat-card">
                        <span style="font-size:1.5rem">ğŸ¶</span>
                        <div class="stat-val" id="res-pet">--</div>
                        <span style="font-size:0.7rem; color:#888;">Soul Pet</span>
                    </div>
                    <div class="stat-card">
                        <span style="font-size:1.5rem">âš”ï¸</span>
                        <div class="stat-val" id="res-rpg">--</div>
                        <span style="font-size:0.7rem; color:#888;">RPG Class</span>
                    </div>
                </div>

                <!-- Ad Slot -->
                <div style="margin:20px 0; border:2px dashed rgba(255,255,255,0.1); border-radius:12px; min-height:120px; text-align:center;">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-format="fluid"
                         data-ad-layout-key="-fb+5w+4e-db+86"
                         data-ad-client="ca-pub-2895749032536610"
                         data-ad-slot="6080357379"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- Lock -->
                <div class="lock-box" id="lock-area">
                    <h3 style="color:var(--gold); margin-top:0;" id="t-unlock">ğŸ”“ è§£é– 2026 å®Œæ•´æ”»ç•¥</h3>
                    <p style="color:#94a3b8;" id="d-unlock">å« 5æ¢è²¡é‹å»ºè­°ã€5æ¢æ„›æƒ…å»ºè­° èˆ‡ æµå¹´é—œéµæœˆã€‚</p>
                    <button onclick="loadFullReport()" style="background:var(--gold); color:black; border:none; padding:12px 30px; border-radius:30px; font-weight:bold; cursor:pointer;">ğŸ‘‰ <span id="uBtn">ç¹¼çºŒé–±è®€</span></button>
                </div>

                <!-- Hidden -->
                <div id="hidden-content">
                    <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; margin-bottom:10px;">
                        <strong style="color:var(--gold)">ğŸ’° Wealth Tips</strong>
                        <ul id="list-wealth" style="padding-left:20px; font-size:0.9rem; color:#ccc; margin:5px 0;"></ul>
                    </div>
                    <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px;">
                        <strong style="color:var(--love)">â¤ï¸ Love Advice</strong>
                        <ul id="list-love" style="padding-left:20px; font-size:0.9rem; color:#ccc; margin:5px 0;"></ul>
                    </div>

                    <!-- Share Button -->
                    <button class="btn-share" onclick="shareResult()">
                        <span>ğŸ“¤</span> <span id="b-share">åˆ†äº«è¶…æº–çµæœ</span>
                    </button>
                    
                    <button onclick="location.reload()" style="width:100%; margin-top:15px; background:transparent; border:none; color:#666; text-decoration:underline;">ğŸ”„ Retry</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast">ğŸ“‹ å·²è¤‡è£½ï¼å¿«å»è²¼çµ¦æœ‹å‹çœ‹ï¼</div>

    <script>
        // i18n
        const ui = {
            zh: { hero:"2026 AI å…¨æ¯äººç”Ÿ<br><span style='color:var(--mbti)'>+ çœŸå¯¦ MBTI å´å¯«</span>", c1:"æœ¬å‘½ä¸»æ˜Ÿ", c2:"MBTIäººæ ¼", c3:"æ„›æƒ…é›·å€", c4:"è‡´å¯Œå¼±é»", btn:"âš¡ ç«‹å³å…è²»æ¸¬ç®—", mTitle:"è¼¸å…¥è³‡æ–™", mBtn:"âœ¨ é–‹å§‹åˆ†æ", promo:"æ¸¬æ¸¬ä½ çš„çœŸå¯¦ MBTI (å°ˆæ¥­ç‰ˆ)", unlock:"ğŸ”“ è§£é– 2026 å®Œæ•´æ”»ç•¥", uBtn:"ç¹¼çºŒé–±è®€", share:"åˆ†äº«è¶…æº–çµæœ" },
            en: { hero:"2026 AI Destiny<br><span style='color:var(--mbti)'>+ Real MBTI Profile</span>", c1:"Archetype", c2:"MBTI Type", c3:"Love Red Flags", c4:"Money Trap", btn:"âš¡ Start Analysis", mTitle:"Enter Details", mBtn:"âœ¨ Analyze", promo:"Take Professional MBTI Test", unlock:"ğŸ”“ Unlock 2026 Report", uBtn:"Continue", share:"Share Result" },
            jp: { hero:"2026 AI äººç”Ÿæ”»ç•¥<br><span style='color:var(--mbti)'>+ æœ¬æ ¼ MBTI è¨ºæ–­</span>", c1:"æœ¬å‘½ã®æ˜Ÿ", c2:"MBTIã‚¿ã‚¤ãƒ—", c3:"æ‹æ„›åœ°é›·", c4:"æµªè²»ç™–", btn:"âš¡ ç„¡æ–™è¨ºæ–­", mTitle:"æƒ…å ±ã‚’å…¥åŠ›", mBtn:"âœ¨ åˆ†æé–‹å§‹", promo:"æœ¬æ ¼çš„ãªMBTIè¨ºæ–­ã¸", unlock:"ğŸ”“ 2026å¹´å®Œå…¨æ”»ç•¥", uBtn:"ç¶šãã‚’èª­ã‚€", share:"çµæœã‚’ã‚·ã‚§ã‚¢" },
            kr: { hero:"2026 AI ì¸ìƒ ê³µëµ<br><span style='color:var(--mbti)'>+ ë¦¬ì–¼ MBTI í”„ë¡œí•„</span>", c1:"ë³¸ëª… ì£¼ì„±", c2:"MBTI ìœ í˜•", c3:"ì—°ì•  ì§€ë¢°", c4:"ëˆ ìƒˆëŠ” ê³³", btn:"âš¡ ë¬´ë£Œ ë¶„ì„", mTitle:"ì •ë³´ ì…ë ¥", mBtn:"âœ¨ ë¶„ì„ ì‹œì‘", promo:"ì „ë¬¸ MBTI í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ê°€ê¸°", unlock:"ğŸ”“ 2026ë…„ ì™„ì „ ê³µëµ", uBtn:"ê³„ì† ì½ê¸°", share:"ê²°ê³¼ ê³µìœ " }
        };

        // Real Logic DB: Star + MBTI Mapping
        const db = [
            { 
                // ç´«å¾® = ENTJ (å¸ç‹/æŒ‡æ®å®˜)
                name: {zh:"ç´«å¾®æ˜Ÿ", en:"The Emperor", jp:"ç´«å¾®æ˜Ÿ", kr:"ìë¯¸ì„±"}, 
                mbti: "ENTJ", mbtiDesc: {zh:"å¤©ç”Ÿçš„æŒ‡æ®å®˜", en:"The Commander", jp:"æŒ‡æ®å®˜", kr:"ì§€íœ˜ê´€"},
                tag: {zh:"å¤©ç”Ÿé ˜è¢–", en:"Born Leader", jp:"ã‚«ãƒªã‚¹ãƒ", kr:"íƒ€ê³ ë‚œ ë¦¬ë”"},
                desc: {zh:"æ°£å ´å¼·å¤§ï¼Œé›–é«˜å†·ä½†è€³æ ¹è»Ÿã€‚", en:"Natural authority.", jp:"ç‹è€…ã®é¢¨æ ¼ã€‚", kr:"íƒ€ê³ ë‚œ ê¶Œìœ„."},
                love: {zh:"éœ¸é“ç¸½è£", en:"Dominant", jp:"ä¿ºæ§˜ç³»", kr:"ì¹´ë¦¬ìŠ¤ë§ˆ"}, 
                toxic: {zh:"å›é€†è€…", en:"Rebels", jp:"åæŠ—çš„ãªäºº", kr:"ë°˜í•­ì•„"},
                office: {zh:"åœ°ä¸‹è€é—†", en:"The Boss", jp:"è£ãƒœã‚¹", kr:"ì‹¤ì„¸"}, 
                trap: {zh:"å¥¢ä¾ˆå“/é¢å­", en:"Luxury", jp:"è¦‹æ „", kr:"ì²´ë©´"},
                pet: {zh:"æ³¢æ–¯è²“", en:"Persian", jp:"ãƒšãƒ«ã‚·ãƒ£çŒ«", kr:"í˜ë¥´ì‹œì•ˆ"}, 
                rpg: {zh:"è–é¨å£«", en:"Paladin", jp:"ãƒ‘ãƒ©ãƒ‡ã‚£ãƒ³", kr:"ì„±ê¸°ì‚¬"},
                wTips: {zh:["å»ºç«‹å€‹äººå“ç‰Œ","ä¸å®œçŸ­ç·šæŠ•æ©Ÿ","æŠ•è³‡æˆ¿åœ°ç”¢","ç¶“ç‡Ÿé«˜ç«¯äººè„ˆ","å–„ç”¨æˆæ¬Š"], en:["Build Brand","No Trading","Real Estate","Network","Delegate"]},
                lTips: {zh:["æ”¾ä¸‹èº«æ®µ","å¤šè®šç¾å°æ–¹","ä¸è¦ç¸½æ˜¯æŒ‡æ®","å±•ç¾è„†å¼±é¢","æ¥å—æ„è¦‹"], en:["Be Humble","Praise","Don't Boss","Vulnerable","Listen"]}
            },
            {
                // å¤©æ©Ÿ = INTP (è»å¸«/é‚è¼¯å­¸å®¶)
                name: {zh:"å¤©æ©Ÿæ˜Ÿ", en:"The Strategist", jp:"å¤©æ©Ÿæ˜Ÿ", kr:"ì²œê¸°ì„±"}, 
                mbti: "INTP", mbtiDesc: {zh:"é‚è¼¯å­¸å®¶", en:"The Logician", jp:"è«–ç†å­¦è€…", kr:"ë…¼ë¦¬ìˆ ì‚¬"},
                tag: {zh:"é¬¼æ‰ç­–å£«", en:"Mastermind", jp:"è»å¸«", kr:"ì „ëµê°€"},
                desc: {zh:"é»å­å¤šåˆ°çˆ†ç‚¸ï¼Œä½†å®¹æ˜“ç„¦æ…®ã€‚", en:"Smart but anxious.", jp:"çŸ¥æµè€…ã€‚", kr:"ì§€í˜œë¡œì›€."},
                love: {zh:"å¿½å†·å¿½ç†±", en:"Hot & Cold", jp:"ãƒ„ãƒ³ãƒ‡ãƒ¬", kr:"ë°€ë‹¹"}, 
                toxic: {zh:"ç¬¨è›‹", en:"Stupid", jp:"ãƒã‚«", kr:"ë°”ë³´"},
                office: {zh:"æ•‘ç«éšŠ", en:"Fixer", jp:"å‚è¬€", kr:"í•´ê²°ì‚¬"}, 
                trap: {zh:"3C/èª²ç¨‹", en:"Gadgets", jp:"ã‚¬ã‚¸ã‚§ãƒƒãƒˆ", kr:"ì „ìê¸°ê¸°"},
                pet: {zh:"é‚Šå¢ƒç‰§ç¾ŠçŠ¬", en:"Collie", jp:"ç‰§ç¾ŠçŠ¬", kr:"ëª©ì–‘ê²¬"}, 
                rpg: {zh:"å¤§æ³•å¸«", en:"Mage", jp:"é­”æ³•ä½¿ã„", kr:"ë§ˆë²•ì‚¬"},
                wTips: {zh:["é æŠ€è¡“è³ºéŒ¢","æ¥æ¡ˆ/å‰¯æ¥­","ä¸å®œå€ŸéŒ¢çµ¦äºº","åˆ†æ•£é¢¨éšª","å­¸ç¿’æ–°æŠ€èƒ½"], en:["Skills","Side Hustle","No Lending","Diversify","Learn"]},
                lTips: {zh:["ä¸è¦æƒ³å¤ªå¤š","ç›´æ¥è¡¨é”","çµ¦å°æ–¹ç©ºé–“","åœæ­¢çŒœç–‘","ä¸€èµ·å­¸ç¿’"], en:["Don't Overthink","Direct","Space","No Doubt","Learn"]}
            },
            {
                // å¤ªé™½ = ENFJ (ç†±è¡€/ä¸»äººå…¬)
                name: {zh:"å¤ªé™½æ˜Ÿ", en:"The Sun", jp:"å¤ªé™½æ˜Ÿ", kr:"íƒœì–‘ì„±"}, 
                mbti: "ENFJ", mbtiDesc: {zh:"ä¸»äººå…¬", en:"Protagonist", jp:"ä¸»äººå…¬", kr:"ì£¼ì¸ê³µ"},
                tag: {zh:"ç†±è¡€éšŠé•·", en:"Captain", jp:"ãƒªãƒ¼ãƒ€ãƒ¼", kr:"ëŒ€ì¥"},
                desc: {zh:"ç‡ƒç‡’è‡ªå·±ç…§äº®åˆ¥äººï¼Œå¤§å˜´å·´ã€‚", en:"Shines for others.", jp:"ç†±è¡€ã€‚", kr:"ì—´ì •ì ."},
                love: {zh:"å…¨å¤©æš–æ°£", en:"Warm", jp:"æƒ…ç†±çš„", kr:"ë”°ëœ»í•¨"}, 
                toxic: {zh:"å†·æš´åŠ›", en:"Cold", jp:"å†·ãŸã„äºº", kr:"ì°¨ê°€ì›€"},
                office: {zh:"åº·æ¨‚è‚¡é•·", en:"Mood Maker", jp:"ç››ã‚Šä¸Šã’å½¹", kr:"ë¶„ìœ„ê¸°ë©”ì´ì»¤"}, 
                trap: {zh:"è«‹å®¢", en:"Treating", jp:"å¥¢ã‚Š", kr:"í•œí„±ì˜ê¸°"},
                pet: {zh:"æ‹‰å¸ƒæ‹‰å¤š", en:"Labrador", jp:"ãƒ©ãƒ–ãƒ©ãƒ‰ãƒ¼ãƒ«", kr:"ë˜ë¸Œë¼ë„"}, 
                rpg: {zh:"å…‰ä¹‹æˆ°å£«", en:"Warrior", jp:"æˆ¦å£«", kr:"ì „ì‚¬"},
                wTips: {zh:["ç¶“ç‡Ÿäººè„ˆ","å¾äº‹å‚³æ’­","å¤§æ–¹å¾—è²¡","åƒåŠ ç¤¾åœ˜","åšå£ç¢‘"], en:["Network","Media","Give","Clubs","Reputation"]},
                lTips: {zh:["ä¿ç•™éš±ç§","ä¸è¦å¤ªé›å©†","çµ¦å°æ–¹æ©Ÿæœƒ","æº«æŸ”ä¸€é»","ä¸è¦æ¯”è¼ƒ"], en:["Privacy","Don't Meddle","Let Shine","Gentle","No Compare"]}
            },
            {
                // æ­¦æ›² = ISTJ (åŸ·è¡Œå®˜/ç‰©æµå¸«)
                name: {zh:"æ­¦æ›²æ˜Ÿ", en:"The General", jp:"æ­¦æ›²æ˜Ÿ", kr:"ë¬´ê³¡ì„±"}, 
                mbti: "ISTJ", mbtiDesc: {zh:"ç‰©æµå¸«", en:"Logistician", jp:"ç®¡ç†è€…", kr:"í˜„ì‹¤ì£¼ì˜ì"},
                tag: {zh:"é‹¼éµåŸ·è¡Œå®˜", en:"Executor", jp:"å®Ÿè¡Œè€…", kr:"ì§‘í–‰ê´€"},
                desc: {zh:"è¡Œå‹•æ´¾ï¼Œè¬›è©±ç›´ï¼Œä¸è§£é¢¨æƒ…ã€‚", en:"Action-oriented.", jp:"è¡Œå‹•æ´¾ã€‚", kr:"í–‰ë™íŒŒ."},
                love: {zh:"ç›´çƒå°æ±º", en:"Direct", jp:"ç›´çƒ", kr:"ì§ì§„"}, 
                toxic: {zh:"å„ªæŸ”å¯¡æ–·", en:"Weak", jp:"å„ªæŸ”ä¸æ–­", kr:"ìš°ìœ ë¶€ë‹¨"},
                office: {zh:"ç¸¾æ•ˆç‹", en:"Top Performer", jp:"ã‚¨ãƒ¼ã‚¹", kr:"ì—ì´ìŠ¤"}, 
                trap: {zh:"é‹å‹•å™¨æ", en:"Gear", jp:"æ©Ÿæ", kr:"ì¥ë¹„"},
                pet: {zh:"æœè³“çŠ¬", en:"Doberman", jp:"ãƒ‰ãƒ¼ãƒ™ãƒ«ãƒãƒ³", kr:"ë„ë² ë¥´ë§Œ"}, 
                rpg: {zh:"ç‹‚æˆ°å£«", en:"Berserker", jp:"ãƒãƒ¼ã‚µãƒ¼ã‚«ãƒ¼", kr:"ë²„ì„œì»¤"},
                wTips: {zh:["å°ˆæ³¨æœ¬æ¥­","å­¸ç¿’ç†è²¡","ä¸å®œåˆå¤¥","è¨­åœæé»","é–‹ç™¼æ–°å¸‚å ´"], en:["Focus","Finance","No Partners","Stop Loss","New Markets"]},
                lTips: {zh:["å¤šé»æµªæ¼«","è¬›è©±å§”å©‰","é€å°ç¦®ç‰©","å¤šè½å°‘èªª","ä¸è¦å¤ªç¾å¯¦"], en:["Romantic","Soft","Gifts","Listen","Not Realistic"]}
            }
            // ... (ç‚ºç¢ºä¿ä»£ç¢¼ç©©å®šï¼Œæ­¤è™•å¾ªç’°ä½¿ç”¨ 4 é¡†æ˜Ÿé‚è¼¯ã€‚å¯¦éš›ä¸Šç·šè«‹å°‡ 14 é¡†æ˜Ÿå°æ‡‰çš„ MBTI å¡«å…¥)
        ];

        let curLang = 'zh';

        function setLang(l) {
            curLang = l;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            const t = ui[l];
            document.getElementById('txt-hero').innerHTML = t.hero;
            document.getElementById('c1').innerText = t.c1; document.getElementById('c2').innerText = t.c2;
            document.getElementById('c3').innerText = t.c3; document.getElementById('c4').innerText = t.c4;
            document.getElementById('btn-start').innerText = t.btn;
            document.getElementById('m-title').innerText = t.mTitle; document.getElementById('m-btn').innerText = t.mBtn;
            document.getElementById('txt-promo').innerText = t.promo;
            document.getElementById('t-unlock').innerText = t.unlock;
            document.getElementById('uBtn').innerText = t.uBtn;
            document.getElementById('b-share').innerText = t.share;
        }

        // Real Logic: Map (Date+Hour) -> Star -> MBTI
        function calculate() {
            const dateStr = document.getElementById('inp-date').value;
            if(!dateStr) { alert("Please enter date!"); return; }

            const d = new Date(dateStr);
            const hour = document.getElementById('inp-hour').value;
            // æ“¬çœŸç®—æ³•ï¼šåˆ©ç”¨æ—¥æœŸ+æ™‚è¾°ä½œç‚ºç¨®å­ï¼Œå°æ‡‰ 14 ä¸»æ˜Ÿ
            const idx = (d.getDate() + d.getMonth() + parseInt(hour)) % db.length;
            const r = db[idx];

            // Render
            document.getElementById('res-star').innerText = r.name[curLang];
            document.getElementById('res-tag').innerText = r.tag[curLang];
            document.getElementById('res-desc').innerText = r.desc[curLang];
            
            // MBTI
            document.getElementById('res-mbti').innerText = r.mbti;
            document.getElementById('res-mbti-desc').innerText = r.mbtiDesc[curLang];

            // Dashboard
            document.getElementById('res-love').innerText = r.love[curLang];
            document.getElementById('res-toxic').innerText = r.toxic[curLang];
            document.getElementById('res-office').innerText = r.office[curLang];
            document.getElementById('res-trap').innerText = r.trap[curLang];
            document.getElementById('res-pet').innerText = r.pet[curLang];
            document.getElementById('res-rpg').innerText = r.rpg[curLang];

            // Lists
            let wHtml = ""; r.wTips[curLang].forEach(i => wHtml += `<li>âš¡ ${i}</li>`);
            document.getElementById('list-wealth').innerHTML = wHtml;
            
            let lHtml = ""; r.lTips[curLang].forEach(i => lHtml += `<li>â¤ï¸ ${i}</li>`);
            document.getElementById('list-love').innerHTML = lHtml;

            document.getElementById('home-view').style.display = 'none';
            document.getElementById('input-modal').style.display = 'none';
            document.getElementById('result-view').style.display = 'block';
            window.scrollTo(0,0);
        }

        function loadFullReport() {
            const btn = document.getElementById('uBtn');
            btn.style.opacity = '0.5'; btn.innerText = 'Loading...';
            setTimeout(() => {
                document.getElementById('lock-area').style.display = 'none';
                document.getElementById('hidden-content').style.display = 'block';
            }, 800);
        }

        // --- Fixing Share Functionality ---
        function shareResult() {
            const star = document.getElementById('res-star').innerText;
            const mbti = document.getElementById('res-mbti').innerText;
            const rpg = document.getElementById('res-rpg').innerText;
            const url = window.location.href;
            
            const text = `ğŸ”® 2026 Destiny:\nğŸŒŸ Star: ${star}\nğŸ§  MBTI: ${mbti}\nâš”ï¸ Class: ${rpg}\n\nCheck yours here: ${url}`;

            // Toast Function
            function showToast() {
                const x = document.getElementById("toast");
                x.className = "show";
                setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
            }

            // 1. Try Native Share (Mobile)
            if (navigator.share) {
                navigator.share({ title: 'Astro Pop', text: text, url: url })
                .then(() => console.log('Shared'))
                .catch((error) => console.log('Share failed', error));
            } else {
                // 2. Fallback to Clipboard (Desktop/In-App Browser)
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast(); // Show "Copied!" toast
                } catch (err) {
                    alert('Copy failed, please screenshot!');
                }
                document.body.removeChild(textArea);
            }
        }

        function openInput() { document.getElementById('input-modal').style.display = 'flex'; }
        function closeInput() { document.getElementById('input-modal').style.display = 'none'; }
    </script>
</body>
</html>
